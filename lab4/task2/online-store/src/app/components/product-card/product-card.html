<div class="card">
  <a class="image" [href]="product.link" target="_blank" rel="noopener noreferrer">
    <img [src]="selectedImage" [alt]="product.name" />
  </a>

  <div class="thumbs">
    @for (img of product.images; track img) {
      <button class="thumb" type="button" (click)="setImage(img)" [class.active]="img === selectedImage">
        <img [src]="img" alt="thumb" />
      </button>
    }
  </div>

  <div class="content">
    <h3 class="title">
      <a [href]="product.link" target="_blank" rel="noopener noreferrer">{{ product.name }}</a>
    </h3>

    <p class="desc">{{ product.description }}</p>

    <div class="meta">
      <div class="price">{{ product.price | number }} ₸</div>

      <div class="rating" [title]=" 'Rating: ' + product.rating">
        <span class="badge">{{ product.rating }}</span>
        <span class="stars">
                    @for (s of getStars(); track $index) {
                      <span class="star" [class.filled]="s.filled">★</span>
                    }
                </span>
      </div>
    </div>
  </div>

  <div class="actions">
    <button type="button" class="WhatsApp" (click)="shareWhatsApp()">Share WhatsApp</button>
    <button type="button" class="Telegram" (click)="shareTelegram()">Share Telegram</button>
    <a class="kaspi" [href]="product.link" target="_blank" rel="noopener noreferrer">Open on Kaspi</a>
  </div>
</div>
